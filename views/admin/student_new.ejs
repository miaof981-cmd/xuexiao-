<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>新建学生</title>
  <link rel="stylesheet" href="/styles.css" />
  <style>
    .container { max-width: 720px; margin: 0 auto; padding: 16px; }
    form { display: grid; gap: 8px; }
    fieldset { border:1px solid #ddd; padding:8px; }
  </style>
</head>
<body>
  <div class="container">
    <h1>新建学生</h1>
    <p><a href="/admin/students"><button>返回学生列表</button></a></p>
    <form method="post" action="/admin/students/create" enctype="multipart/form-data">
      <label>系统分配学号</label>
      <input value="<%= nextId %>" disabled />
      <input type="hidden" name="_nextId" value="<%= nextId %>" />

      <label>初始密码</label>
      <input name="password" value="123456" />
      <label>家长名称</label>
      <input name="name" />

      <label>初始化档案类型</label>
      <select name="initType" id="initType">
        <option value="">无</option>
        <option value="reportCard">成绩单</option>
        <option value="punishment">处分单</option>
        <option value="image">图片</option>
      </select>

      <fieldset id="initReport" style="display:none">
        <legend>成绩单字段</legend>
        <label>学期</label>
        <input name="term" />
        <label>语文</label>
        <input name="chinese" type="number" />
        <label>数学</label>
        <input name="math" type="number" />
        <label>英语</label>
        <input name="english" type="number" />
        <label>物理</label>
        <input name="physics" type="number" />
        <label>化学</label>
        <input name="chemistry" type="number" />
      </fieldset>

      <fieldset id="initPunish" style="display:none">
        <legend>处分字段</legend>
        <label>日期</label>
        <input name="date" type="date" />
        <label>类型</label>
        <input name="ptype" />
        <label>原因</label>
        <input name="reason" />
      </fieldset>

      <fieldset id="initImage" style="display:none">
        <legend>图片档案</legend>
        <label>标题</label>
        <input name="initTitle" />
        <label>描述</label>
        <input name="initDesc" />
        <label>图片URL（可选）</label>
        <input name="initImageUrl" placeholder="https://..." />
        <label>或上传图片文件（可选）</label>
        <input type="file" name="initImageFile" accept="image/*" />
      </fieldset>

      <button type="submit">创建学生</button>
    </form>

    <script>
      (function(){
        const sel = document.getElementById('initType');
        const r = document.getElementById('initReport');
        const p = document.getElementById('initPunish');
        const i = document.getElementById('initImage');
        function update(){
          const v = sel.value;
          r.style.display = v==='reportCard' ? 'block' : 'none';
          p.style.display = v==='punishment' ? 'block' : 'none';
          i.style.display = v==='image' ? 'block' : 'none';
        }
        sel.addEventListener('change', update);
        update();
      })();
    </script>
  </div>
</body>
</html>


